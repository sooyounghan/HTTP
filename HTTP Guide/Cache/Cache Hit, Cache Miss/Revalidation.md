-----
### 재검사(Revalidation)
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/a5c29d4f-fff3-4703-b81f-43e19a8034eb">
</div>

1. 원 서버 콘텐츠를 변경될 수 있으므로, 캐시는 반드시 그들이 갖고 있는 사본이 여전히 최신인지 서버를 통해 점검해야 함
2. 이러한 신선도 검사를 HTTP 재검사라 부름
   - 효과적인 재검사를 위해, HTTP는 서버로부터 전체 객체를 가져오지 않고도 콘텐츠가 여전히 신선한지 빠르게 검사할 수 있는 특별한 요청 정의

3. 캐시는 스스로 원한다면 언제든 사본을 재검사할 수 있음
   - 그러나 캐시가 문서를 수백만 개씩 갖고 있는 경우가 흔한데, 네트워크 대역폭은 부족하므로 대부분 캐시는 클라이언트가 사본을 요청하였으며, 그 사본이 검사를 할 필요가 있을 정도로 충분히 오래 된 경우에만 재검사
  
4. 캐시는 캐시된 사본의 재검사가 필요할 때, 원 서버에 작은 재검사 요청을 보냄
   - 콘텐츠가 변경되지 않았다면, 서버는 아주 작은 304 Not Modified 응답을 보냄
   - 그 사본이 여전히 유효함을 알게 된 캐시는 즉각 사본이 신선하다고 임시로 다시 표시한 뒤 그 사본을 클라이언트에게 보냄
   - 이를 재검사 적중 혹은 느린 적중이라고 부름
   - 이는 순수 캐시 적중보다 느린데, 원 서버와 검사를 할 필요가 있기 때문임
   - 그러나 캐시 부적중보다 빠른데, 서버로부터 객체 데이터를 받아올 필요가 없기 때문임
<div align="center">
<img src="https://github.com/user-attachments/assets/b10f28b8-cfd2-4ed0-953d-c3c392b6d87a">
</div>

5. HTTP는 캐시된 객체를 재확인하기 위해 몇 가지 도구 제공
   - 그 중 가장 많이 쓰이는 것이 If-Modified-Since 헤더 : 서버에게 보내는 GET 요청에 이 헤더를 추가하면 캐시된 시간 이후 변경된 경우에만 사본을 보내달라는 의미
  
6. GET If-Modified-Since 요청이 서버에 도착했을 때 일어날 수 있는 세 가지 상황
   - 서버 콘텐츠가 변경되지 않은 경우 (재검사 적중) : 서버는 클라이언트에게 작은 HTTP 304 Not Modified 응답을 보냄
<div align="center">
<img src="https://github.com/user-attachments/assets/36d96900-c1b4-426e-b3b3-751b96b4a9f9">
</div>

   - 서버 콘텐츠가 변경된 경우 (재검사 부적중) : 만약 서버 객체가 캐시된 사본과 다르다면, 서버는 콘텐츠 전체와 함께 평범한 HTTP 200 OK 응답을 클라이언트에게 보냄  
   - 객체가 삭제된 경우 (객체 삭제) : 만약 서버 객체가 삭제되었다면, 서버는 404 Not Found 응답을 돌려보내며, 캐시는 사본을 삭제
