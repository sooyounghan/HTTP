-----
### 프록시를 통한 보안 트래픽 터널링
-----
1. 클라이언트는 종종 그들을 대신하여 웹 서버에 접근해주는 웹 프록시 서버를 이용
   - 예를 들어, 많은 회사가 기업 네트워크와 공공 인터넷을 잇는 경계에 보안을 위한 프록시 설치
<div align="center">
<img src="https://github.com/user-attachments/assets/24b0dde4-639f-45dd-b116-a950937b8caa">
</div>

  - 이 프록시는 방화벽 라우터가 HTTP 트래픽 교환을 허락한 유일한 장치이며, 바이러스 검사나 기타 콘텐츠 제어를 수행할 것

2. 그러나 클라이언트가 서버로 보낼 데이터를 서버의 공개키로 암호화하기 시작했다면, 프록시는 더 이상 HTTP 헤더를 읽을 수 없음
   - 만약 프록시가 HTTP 헤더를 읽을 수 없다면, 프록시는 어디로 보내야 하는 지 알 수 없음
<div align="center">
<img src="https://github.com/user-attachments/assets/6dbb1b33-3294-468d-b683-0cd7e8ac1fbe">
</div>

3. HTTPS가 프록시와도 잘 동작할 수 있게 하기 위해, 클라이언트가 프록시에게 어디에 접속하려고 하는지 말해주는 방법을 수정해야 함
   - 인기 있는 기법 중 하나는 HTTP SSL 터널링 프로토콜로, 이를 사용해서 클라이언트는 먼저 프록시에게 자신이 연결하고자 하는 안전한 호스트와 포트를 말해줌
   - 클라이언트는 이 내용을 프록시가 읽을 수 있도록 암호화가 시작되기 전 평문을 말해줌
   - HTTP는 CONNECT라 불리는 새로운 확장 메서드를 이용해 평문으로 된 종단 정보를 전송하기 위해 사용 : CONNECT 메서드는 프록시에게 희망하는 호스트와 포트 번호로 연결을 해달라고 말해주며, 완료되면, 클라이언트와 서버 사이에서 데이터가 직접적으로 오갈 수 있게 해주는 터널을 만듬
   - CONNECT 메서드는 안전한 원 서버의 호스트 명과 포트를 콜론으로 구분한 형태로 제공하는 한 줄로 된 텍스트 명령
     + 이 호스트:포트에 뒤이어 스페이스 하나와 HTTP 버전 문자열과 CRLF가 순서대로 옴
     + 0개 이상의 HTTP 요청 해더줄들이 이어진 다음, 빈 줄 하나가 옴
     + 빈 줄 다음에, 만약 커넥션을 수립하기 위한 핸드쉐이크가 성공했다면, SSL 데이터 전송이 시작
<div align="center">
<img src="https://github.com/user-attachments/assets/f7796026-d88b-402b-a189-ab894d39311b">
</div>

   - 요청의 빈 줄 다음에, 클라이언트는 프록시로부터 응답을 기다릴 것
   - 프록시는 요청을 평가하여 그것이 유효하고 사용자가 그러한 커넥션을 요청할 수 있도록 허가를 받았는지 확인
   - 만약 모든 것이 적법하다면 프록시는 목적지 서버로 연결하고 성공하면 200 Connection Established 응답을 클라이언트에게 보냄
<div align="center">
<img src="https://github.com/user-attachments/assets/efeca1ed-177a-46a5-b182-afed3d5509e2">
</div>
