-----
### 네이글(Nagle) 알고리즘과 TCP_NODELAY
-----
1. 애플리케이션이 어떤 크기의 데이터든지(심지어 1바이트라도) TCP 스택으로 전송할 수 있도록, TCP 데이터 스트림 인터페이스를 제공
   - 하지만, 각 TCP 세그먼트는 40바이트 상당의 플래그와 헤더를 포함하여 전송하므로 TCP가 작은 크기의 데이터를 포함한 많은 수의 패킷을 전송한다면 네트워크 성능은 떨어짐 (1바이트 크기의 패킷을 대량으로 전송하는 것을 실리 윈도 증후군(Silly Window Syndrome) 전송자라고 하는데, 이는 비효율적이고 반사회적인 것이며 다른 인터넷 통신에 방해)

2. 네이글 알고리즘(알고리즘을 만들어 낸 존 네이글(John Nagle)의 이름을 따서 만들어짐)은 네트워크의 효율을 위해, 패킷을 전송하기 전 많은 양의 TCP 데이터를 한 개의 덩어리로 합침
   - 네이글 알고리즘은 세그먼트가 최대 크기(패킷의 최대 크기는 LAN 상 1500 바이트 정도, 인터넷 상에서는 수백 바이트 정도)가 되지 않으면 전송을 하지 않음
   - 다만, 다른 모든 패킷이 확인 응답을 받았을 경우에는 최대 크기보다 작은 패킷의 전송 허락
   - 다른 패킷들이 아직 전송 중이면 데이터는 버퍼에 저장되며, 전송되고 나서 확인응답을 기다리던 패킷이 확인 응답을 받았거나, 전송하기 충분할 만큼 패킷이 쌓였을 떄 버퍼에 저장되어 있던 데이터가 전송 (타임아웃과 확인 응답 로직을 변형시킨 다양한 종류의 알고리즘이 존재하지만, 그 알고리즘 모두 TCP 세그먼트보다 더 작은 데이터를 버퍼에 저장)
  
3. 네이글 알고리즘은 HTTP 성능 관련해 여러 문제를 발생시킴
   - 첫 번째로, 크기가 작은 HTTP 메세지는 패킷을 채우지 못하므로 앞으로 생길지, 생기지 않을지 모르는 추가적인 데이터를 기다리며 지연될 것
   - 두 번째로, 네이글 알고리즘은 확인응답 지연과 함께 쓰일 경우, 형편없이 동작 : 네이글 알고리즘은 확인 응답이 도착할 때까지 데이터를 전송을 멈추고 있는 반면, 확인 응답 지연 알고리즘은 확인 응답을 100 ~ 200ms 지연

4. HTTP 애플리케이션은 성능 향상을 위해 HTTP 스택에 TCP_NODELAY라는 파라미터 값을 설정해 네이글 알고리즘을 비활성화하기도 함
   - 이 설정을 했다면, 작은 크기 패킷이 너무 많이 생기지 않도록 큰 크기 데이터 덩어리를 만들어야 함
