-----
### 클라이언트 IP 주소
-----
1. 초기 웹 선구자들은 사용자 식별에 클라이언트 IP 주소를 사용하려 했음
   - 이 방식은 사용자가 확실한 IP 주소를 가지고 있고, 그 주소가 좀처럼 (혹은 절대) 바뀌지 않고, 웹 서버가 요청마다 클라이언트의 IP를 알 수 있다면 문제없이 동작

2. 클라이언트의 IP 주소는 보통 HTTP 헤더에 없지만, 웹 서버는 HTTP 요청을 보내는 반대쪽 TCP 커넥션의 IP 주소를 알아낼 수 있음
   - 예를 들어, 유닉스 시스템에서 getpeername 함수를 호출하면 요청을 보낸 클라이언트 IP 주소 확인 가능
<div align="center">
<img src="https://github.com/user-attachments/assets/ba72efb4-47a8-4eee-81c0-5ea6581c0bde">
</div>

3. 클라이언트 IP 주소로 사용자를 식별하는 방식의 문제점
   - 클라이이언트 IP 주소는 사용자가 아닌, 사용하는 컴퓨터를 가리키므로, 여러 사용자가 같은 컴퓨터를 사용한다면 식별 불가
   - 많은 인터넷 서비스 제공자(ISP)는 사용자가 로그인하면 동적으로 IP 주소 할당 : 사용자는 매번 다른 주소를 받으므로, 웹 서버는 사용자를 IP 주소로 식별할 수 없음
   - 보안을 강화하고 부족한 주소들을 관리하려고 많은 사용자가 네트워크 주소 변환(Network Address Translation, NAT) 방화벽을 통해 인터넷 사용
     + 이 NAT 장비들은 클라이언트의 실제 IP 주소를 방화벽 뒤로 숨기고, 클라이언트의 실제 IP 주소를 내부에서 사용하는 하나의 방화벽 IP 주소(그리고 다른 포트번호)로 변환

   - 보통, HTTP 프록시와 게이트웨이는 원 서버에 새로운 TCP 연결을 함
     + 웹 서버는 클라이언트의 IP 주소 대신 프록시 서버의 IP 주소를 봄
     + 일부 프록시는 원본 IP 주소를 보존하려고 Client-ip나 X-Forwarded-For HTTP 같은 확장 헤더를 추가하여 이 문제를 해결하려 함
     + 하지만 모든 프록시가 이런 식으로 동작하지 않음
<div align="center">
<img src="https://github.com/user-attachments/assets/2a106437-e27c-4366-8368-b6aa894f42cb">
</div>

4. 아직도 세션 간 사용자 추적을 위해 클라이언트 IP 주소를 사용하는 웹 사이트가 있지만, 이 방식은 제대로 동작하지 않으므로 사용하지 않음
5. 어떤 사이트는 보안 기능으로 IP 주소를 사용해, 특정 IP 주소로부터 오는 사용자에게만 문서를 전달하기도 함
   - 인트라넷 같은 제한된 영역에서 적절할 수 있지만, 인터넷에서는 IP 주소를 임의로 변경할 수 있으므로 문제 바랭 가능
   - 또한, 클라이언트와 서버 사이에 프록시도 문제를 발생시킬 수 있음
