-----
### 아이피 맥 포워딩
-----
1. 이더넷 네트워크에서, HTTP 메세지는 주소가 붙은 데이터 패킷의 형태로 보내짐
2. 각 패킷은 출발지와 목적지의 아이피 주소와 TCP 포트번호로 이루어진 레이어-4 주소를 갖고 있음 (레이어-4를 이해하는 장비가 관심을 갖는 주소)
3. 각 패킷은 또한 레이어-2 장비(보통 스위치나 허브)가 주의를 기울여야 하는 레이어-2 주소인 미디어 접근 컨트롤(Media Access Control, MAC) 주소도 갖고 있음
   - 레이어-2 장비의 역할은 들어오는 특정 맥(MAC) 주소의 패킷을 받아서 나가는 특정 맥 주소로 포워딩하는 것

4. 예) 클라이언트의 요청을 게이트웨이로 보내는 레이어-2 스위치
<div align="center">
<img src="https://github.com/user-attachments/assets/13d370f4-c763-4d7e-abe1-3d2fc52b21a5">
</div>

   - 스위치는 맥 주소 MAC3에서 오는 모든 트래픽을 맥 주소 MAC4로 보내도록 프로그래밍
   - 레이어-4를 이해하는 스위치는 레이어-4 주소 (아이피 주소와 TCP 포트 번호)를 검사하여 이 정보를 근거해 라우팅할 수 있음
   - 예를 들어, 레이어-4 스위치는 80번 포트로 향하는 모든 웹 트래픽을 프록시로 보낼 수 있음

5. 예) 레이어-4 스위치를 이용한 맥 포워딩
<div align="center">
<img src="https://github.com/user-attachments/assets/0e84cf38-2191-4a7b-8119-b29526af973f">
</div>

   - 스위치는 모든 80번 포트 트래픽을 MAC3에서 MAC6(프록시 캐시)로 보내도록 프로그래밍
   - 그 외의 모든 MAC3 트래픽은 MAC5으로 감

6. 일반적으로, 요청한 HTTP 콘텐츠가 캐시 안에 있고 신선하다면, 프록시 캐시는 그것을 제공
   - 그렇지 않으면, 프록시 캐시는 클라이언트를 대신해 그 콘텐츠를 가져오기 위해 HTTP 요청을 원 서버에 보냄
   - 스위치는 프록시(MAC6)로부터의 80번 포트 요청을 인터넷 게이트웨이(MAC5)로 보냄

7. MAC 포워딩을 지원하는 레이어-4 스위치는 보통 요청을 여러 프록시 캐시로 보낼 수 있고, 그들 사이 부하 균형을 유지할 수 있음
   - 비슷하게 HTTP 트래픽은 대체 HTTP 서버로도 전달될 수 있음

8. MAC 주소 포워딩은 점 대 점으로 가능하므로, 서버나 프록시는 스위치와 한 홉 거리에 위치해야 함
