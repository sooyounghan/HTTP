-----
### 데이터 터널링, 시간, 커넥션 관리
-----
1. 터널을 통해 전달되는 데이터는 게이트웨이에서 볼 수 없으므로, 게이트웨이는 패킷의 순서나 흐름에 대한 어떠한 가정도 할 수 없음
2. 터널이 일단 연결되면, 데이터는 언제 어디로든 흘러가버릴 수 있음
   - 터널의 양 끝단에서는 두 커넥션으로부터 언제든지 패킷을 받을 수 있는 준비를 해야하고, 그 데이터를 즉시 전달해야 함
   - 터널링된 프로토콜은 데이터 의존성을 포함하고 있거나, 터널의 한 쪽에서 입력받은 데이터를 무시할 수 있음
   - 터널의 한 쪽 끝단에서 데이터를 소비하지 않으면, 터널의 다른 끝단의 데이터 생산자는 행에 걸리게 될 것이고, 결국 교착 상태 발생

3. 클라이언트는 성능을 높이기 위해 CONNECITON 요청을 보낸 다음, 응답을 받기 전 터널 데이터를 전송할 수 있음
   - 이는 서버에 데이터를 더 빨리 보내는 방법이지만, 게이트웨이가 요청에 이어서 데이터를 적절하고 처리할 수 있어야함을 전제로 함
   - 특히, 게이트웨이는 네트워크 I/O 요청이 헤더 데이터만을 반환해줄 것이라고 가정할 수 없어서, 게이트웨이는 커넥션이 맺어지는 대로 헤더를 포함해서 읽어들인 모든 데이터를 서버에 전송해야 함
   - 요청 후 터널을 통해 데이터를 전송한 클라이언트는 인증 요구(Authentication Challenge)나 200 외의 응답이 왔을 때 요청 데이터를 다시 보낼 준비가 되어 있어야 함
     + TCP 요청 패킷이 차지한 영역을 제외한 나머지 영역보다 더 큰 데이터를 파이프라인을 통해 전달하지 말아야 함
     + 그보다 더 큰 데이터를 파이프라인을 통해 보내면, 게이트웨이가 파이프라인을 통해 모든 TCP 패킷을 받기 전 커넥션을 끊었을 경우, 클라이언트에 TCP 리셋을 일으킬 수 있기 때문임
     + TCP 리셋은 클라이언트가 게이트웨이로부터 바은 응답을 잃게 해버림으로써, 클라이언트는 통신 실패가 네트워크 에러 때문인지, 접근 제어나 인증요구 때문인징 알 수 없게 됨

4. 터널의 끝단 어느 부분이든 커넥션이 끊어지면, 그 끊어진 곳으로부터 온 데이터는 반대편으로 전달
   - 그 다음 커넥션이 끊어졌던 터널의 끝단 반대편의 커넥션도 프락시에 의해 끊어질 것
   - 커넥션이 끊긴 한 쪽에 아직 전송하지 않은 데이터는 버려짐
  
