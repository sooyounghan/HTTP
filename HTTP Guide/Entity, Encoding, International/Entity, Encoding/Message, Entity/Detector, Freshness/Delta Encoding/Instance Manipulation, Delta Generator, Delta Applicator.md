-----
### 인스턴스 조작, 델타 생성기, 델타 적용기
-----
1. 클라이언트 A-IM 헤더를 사용해서 자신이 받아들일 수 있는 인스턴스 조작의 종류 명시 가능
2. 서버는 IM 헤더에 사용한 인스턴스 조작 종류를 명시할 수 있음
3. IANA에 등록된 인스턴스 조작의 종류 몇 가지
<div align="center">
<img src="https://github.com/user-attachments/assets/9d184362-2456-48af-9484-46cb570c320d">
</div>

4. 델타 인코딩의 메커니즘
<div align="center">
<img src="https://github.com/user-attachments/assets/e78e5808-6258-4693-b089-2967dadee9ab">
</div>

  - 서버의 델타 생성기는 기저 문서와 그 문서의 최신 인스턴스를 취하여 클라이언트의 A-IM 헤더에 지정된 알고리즘을 이용해 둘 사이의 델타를 계산
  - 클라이언트 측에서는, 델타 적용기가 델타를 취해 기저 문서에 적용하여 문서의 최신 인스턴스를 생성
  - 예를 들어, 델타를 생성하기 위해 사용된 알고리즘이 유닉스 diff -e 명령이라면, 클라이언트는 유닉스 ed 편집기 기능을 이용해서 델타를 적용할 수 있음
    - ```diff -e <file1> <file2>```는 ```<file1>```을 ```<file2>```로 변환해주는 ed 명령의 집합을 생성하기 때문임
    - ed는 몇 가지 명령을 지원하는 매우 단순한 편집기
    - 5c : 기저 문서에서 5번쨰 줄을 지우라는 의미
    - ```chisels.<cr>```은 chisels.를 추가하라는 의미
    - 변경이 더 많다면 더 복잡한 설명이 생성될 수 있음
    - 유닉스 diff -e 알고리즘은 파일에 대한 줄 단위 비굘르 수행하며, 당연히 텍스트 파일에선 문제 없지만, 바이너리 파일에서는 실패할 것
    - vcdiff 알고리즘은 더 강력해서, 텍스트 파일이 아니더라도 동작하며 일반적으로 diff -e보다 더 작은 델타를 생성

5. 델타 인코딩 명세는 A-IM과 IM 헤더의 포맷을 자세히 정의
   - 여기서는 이 헤더들에서 복수 개의 인스턴스 조작들을 (각각에 대한 품질 값들과 함께) 지정할 수 있음
   - 문서는 클라이언트에게 반환되기 전 압축률을 극대화하기 위해 여러 번 인스턴스 조작을 거칠 수 있음
   - 예를 들어, vcdiff 알고리즘에 의해 생성된 델타는 gzip 알고리즘을 이용해 압축될 수 있음
   - 서버 응답읍 그 다음 IM: vcdiff, zip 헤더를 포함할 것이며, 클라이언트는 먼저 gunzip으로 콘텐츠 압축을 풀고, 그 결과로 얻은 델타를 기저 페이지에 적용하여 최종 문서를 얻음

6. 델타 인코딩은 전송 시간을 줄일 수 있지만, 구현하기가 까다로울 수 있음
   - 델타 인코딩을 지원하는 서버는 자신이 제공하는 페이지가 변경되는 매 순간 사본을 모두 유지하고 있어야 함
   - 그래야 클라이언트가 요청을 보냈을 때, 그 클라이언트가 갖고 있는 사본과 최신 사본간의 차이점을 알아낼 수 있음
     + 만약, 문서가 자주 변경된다면, 문서를 요청하는 다른 클라이언트마다 문서에 대한 각기 다른 인스턴스를 받게 될 것이며, 그들이 서버에 다음 번 요청을 할 때, 문서에 대한 자신의 인스턴스와 최신 버전 차이를 요청할 것임
     + 변경점만을 보내는 것을 가능하도록 하기 위해, 서버는 반드시 클라이언트가 가지고 있던 이전 버전 사본들 모두를 유지헤야만 함
   - 문서를 제공하는데 걸리는 시간이 줄어드는 대신, 서버는 문서의 과거 사본을 모두 유지하기 위해 디스크 공간을 더 늘려야 함
   - 이는 전송량 감소로 얻은 이득을 금방 무의미하게 만듬  
