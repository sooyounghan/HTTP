-----
### 아이피 주소 포워딩
-----
1. 아이피 주소 포워딩에서 스위치나 다른 레이어-4를 이해하는 장비는 들어오는 패킷에 대해 TCP/IP 어드레싱을 검증하고, 패킷을 목적지 맥 주소가 아닌 목적지 아이피 주소의 변경에 따라 라우팅
2. 맥 포워딩보다 좋은 점 하나는 목적지 서버가 한 홉 거리에 있을 필요가 없음
   - 그저 스위치에서 업 스트림 위치를 판별할 수 있으면, 일반적인 레이어-3 종단간(End-to-End) 인터넷 라우팅이 패킷을 올바른 위치로 보내줌
   - 이러한 종류의 전달은 네트워크 주소 변환(Network Address Translation, NAT)

3. 라우팅 대칭성이라는 문제 존재
   - 클라이언트로부터 들어오는 TCP 커넥션을 받아주는 스위치는 그 커넥션을 관리하고 있음
   - 스위치는 반드시 그 커넥션을 통해 클라이언트에게 응답을 돌려줘야 함
   - 그러므로 목적지 서버나 프록시로부터 모든 응답은 반드시 그 스위치에게 돌아가야 함
<div align="center">
<img src="https://github.com/user-attachments/assets/aa45d794-ad23-44e1-a8be-c4f1bff01954">
</div>

4. 응답의 귀환 경로를 제어하는 두 가지 방법
   - 패킷의 출발지 아이피 주소를 스위치의 아이피 주소로 변경
     + 스위치와 서버 사이의 네트워크 설정이 어떤가와는 관계 없이, 응답 패킷을 스위치로 가게 함
     + 이 목적지와 출발지 아이피 주소 양쪽을 번역해주는 아이피 전달 장치를 완전 NAT라고 함
     + TCP/IP 데이터그램에서 완전 NAT의 효과 : 인증이나 결제를 위해 필요할 수도 있는 클라이언트 아이피 주소를 웹 서버가 알 수 없게 됨

<div align="center">
<img src="https://github.com/user-attachments/assets/c4269963-82f0-412e-a79b-8f278694cba4">
</div>

   - 만약 출발지 아이피 주소가 그 클라이언트 아이피 주소로 계속 남아있다면, (하드웨어 관점에서) 서버에서 클라이언트로 바로 가는 (스위치를 거치지 않는) 경로가 존재하지 않아야 함
     + 이는 때떄로 반(Half) NAT라고 불림
     + 장점은 서버가 클라이언트 아이피 주소를 얻는다는 것
     + 단점은 클라이언트와 서버 사이의 네트워크 전체에 약간의 통제가 필요함
